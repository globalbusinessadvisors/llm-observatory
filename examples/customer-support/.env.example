# ============================================================================
# AI Customer Support Platform - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# ============================================================================
# Environment Settings
# ============================================================================
ENVIRONMENT=development
NODE_ENV=development
BUILD_TARGET=development
LOG_LEVEL=info
RUST_LOG=info

# ============================================================================
# LLM Provider API Keys
# ============================================================================
# OpenAI Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_ORG_ID=

# Anthropic Configuration
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Azure OpenAI Configuration (Optional)
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_VERSION=2024-02-15-preview
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres_secure_password_change_me
POSTGRES_DB=customer_support
POSTGRES_PORT=5432

# Connection string (auto-generated, usually don't need to change)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# ============================================================================
# Vector Database Configuration (Qdrant)
# ============================================================================
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_API_KEY=
QDRANT_COLLECTION=knowledge_base

# ============================================================================
# Redis Configuration
# ============================================================================
REDIS_PORT=6379
REDIS_PASSWORD=redis_secure_password_change_me
REDIS_MAXMEMORY=256mb

# Connection string (auto-generated)
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0

# ============================================================================
# Service Ports
# ============================================================================
CHAT_API_PORT=8000
KB_API_PORT=8001
ANALYTICS_API_PORT=8002
FRONTEND_PORT=3000

# ============================================================================
# Chat API Configuration (Python/FastAPI)
# ============================================================================
CHAT_API_WORKERS=4
MAX_CONVERSATION_HISTORY=20
MAX_TOKENS_PER_REQUEST=4096
TIMEOUT_SECONDS=30

# Default LLM Settings
DEFAULT_MODEL=gpt-4-turbo-preview
DEFAULT_TEMPERATURE=0.7
DEFAULT_MAX_TOKENS=1000

# ============================================================================
# Knowledge Base API Configuration (Node.js/Express)
# ============================================================================
# Embedding Configuration
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# Chunking Configuration
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# Search Configuration
TOP_K_RESULTS=5
SIMILARITY_THRESHOLD=0.7
MIN_RELEVANCE_SCORE=0.6

# ============================================================================
# Analytics API Configuration (Rust/Axum)
# ============================================================================
METRICS_WINDOW_SECONDS=3600
CACHE_TTL_SECONDS=300
MAX_QUERY_LIMIT=1000
AGGREGATION_INTERVAL=300

# ============================================================================
# Frontend Configuration (React/Vite)
# ============================================================================
VITE_CHAT_API_URL=http://localhost:8000
VITE_KB_API_URL=http://localhost:8001
VITE_ANALYTICS_API_URL=http://localhost:8002
VITE_WS_URL=ws://localhost:8000/ws

# Feature Flags
VITE_ENABLE_ANALYTICS=true
VITE_ENABLE_KB_UPLOAD=true
VITE_ENABLE_CONVERSATION_EXPORT=true

# ============================================================================
# LLM Observatory Integration
# ============================================================================
LLM_OBSERVATORY_ENABLED=true
LLM_OBSERVATORY_URL=http://llm-observatory-api:3000
LLM_OBSERVATORY_API_KEY=

# Telemetry Configuration
LLM_OBSERVATORY_BATCH_SIZE=100
LLM_OBSERVATORY_FLUSH_INTERVAL=5000
LLM_OBSERVATORY_RETRY_ATTEMPTS=3

# ============================================================================
# CORS Configuration
# ============================================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080

# ============================================================================
# Security Settings
# ============================================================================
# JWT Configuration
JWT_SECRET=your-jwt-secret-key-change-me-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600

# API Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=60
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# Monitoring & Observability
# ============================================================================
# Sentry (Optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=${ENVIRONMENT}

# OpenTelemetry (Optional)
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_SERVICE_NAME=customer-support

# ============================================================================
# External Services (Optional)
# ============================================================================
# Email Service (for notifications)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@example.com

# Slack Integration (for alerts)
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#customer-support

# ============================================================================
# Development Settings
# ============================================================================
# Hot Reload
WATCHPACK_POLLING=true
CHOKIDAR_USEPOLLING=true

# Debug
DEBUG=false
VERBOSE_LOGGING=false

# Testing
TEST_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/customer_support_test
SKIP_DB_MIGRATIONS=false

# ============================================================================
# Production Overrides
# ============================================================================
# Uncomment and set these for production deployments
# ENVIRONMENT=production
# NODE_ENV=production
# BUILD_TARGET=production
# LOG_LEVEL=warn
# DEBUG=false
# RATE_LIMIT_MAX_REQUESTS=1000
# JWT_EXPIRATION=86400
